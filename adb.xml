<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Monday, January 02, 2023, 4:38 PM -->
<!-- MuClient version 5.07-pre -->

<!-- Plugin "adb" generated by Plugin Wizard -->

<muclient>
<plugin
   name="adb"
   author="Athlau"
   id="cf78ba52f9bbad41f7e6b2e8"
   language="Lua"
   purpose="eq db of some sort"
   save_state="y"
   date_written="2023-01-02 16:37:58"
   requires="5.07"
   version="1.0"
   >
<description trim="y">
<![CDATA[
Bla bla bla, add more text here
]]>
</description>

</plugin>


<!--  Triggers  -->

<triggers>
  <trigger
   enabled="n"
   match="^{invmon}(?<action>\d+)\,(?<id>\d+)\,.+\,.+$"
   regexp="y"
   send_to="12"
   sequence="100"
   script="adbOnInvmonTrigger"
   name="adbInvmonTrigger"
   omit_from_output="y"
  >
  </trigger>

  <trigger
   enabled="y"
   match="^{invitem}(?<id>\d+),(.*?),(?<item>.*),(.*?),(.*?),(.*?),(.*?),(.*?)$"
   regexp="y"
   send_to="12"
   sequence="100"
   name="adbInvitemTrigger"
   omit_from_output="n"
   script="adbOnInvitemTrigger"
  >
  </trigger>

  <!-- Unfortunately mush client only gives style runs for the last line of multiline trigger. -->
  <!-- We want to properly capture colored item name to search it in the cash, so have to make 2 similar triggers. -->
  <!-- Making sure that multiline crumble trigger fires after the item looted trigger. -->
  <trigger
   enabled="y"
   match="^You get (?:(?<gold>[0-9,]+) gold coins?|(?:(?<count>\d+) \* )?(?<item>.*)) from the \w+ corpse of (?<mob>.*)\.$"
   regexp="y"
   send_to="12"
   sequence="100"
   keep_evaluating="y"
   script="adbOnItemLootedTrigger"
  >
  </trigger>

  <trigger
   enabled="y"
   match="^You get (?<item>.*) from the \w+ corpse of (?<mob>.*)\.\n(?i)\1(?-i) crumbles into (?<crumble>[0-9,]+) gold pieces?.\n\Z"
   regexp="y"
   send_to="12"
   sequence="100"
   keep_evaluating="y"
   lines_to_match="2"
   multi_line="y"
   script="adbOnItemLootedCrumblesTrigger"
  >
  </trigger>
</triggers>

<aliases>
  <alias
   script="adbOnIdentifyCommand"
   match="^aid (?<id>[^\s]+)(?<worn> worn)?(?: (?<channel>.+))?$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   script="adbOnAdbDebugDump"
   match="^adb_debug_dump$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   script="adbDrainStacks"
   match="^adb_debug_drain$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
</aliases>

<!--  Script  -->

<script>
<![CDATA[
dofile(GetPluginInfo(GetPluginID(), 20).."adb.lua")
]]>
</script>

</muclient>
