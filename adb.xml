<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Monday, January 02, 2023, 4:38 PM -->
<!-- MuClient version 5.07-pre -->

<!-- Plugin "adb" generated by Plugin Wizard -->

<muclient>
<plugin
   name="adb"
   author="Athlau"
   id="cf78ba52f9bbad41f7e6b2e8"
   language="Lua"
   purpose="eq db of some sort"
   save_state="y"
   date_written="2023-01-02 16:37:58"
   requires="5.07"
   version="1.023"
   >
<description trim="y">
<![CDATA[
@R---------------- ADB plugin loaded ----------------------------------------------
@CThis is still early version and lots of things are in my todo list, including
@Cadding more help details and examples.
@wBla bla bla, add more text here

@R    It's required to enable server side invmon for this plugin to work!
@w    Execute the following command to enable it:
      @Winvmon
      @wYou will now see inventory update tags.
@w    Note: if you're using plugins like dinv then it's already enabled.
@w    PS. I'm too lazy to write code which enables it :P

@w Type @Gadb help@w for more information.

1.023
Fix aid error for characters without identify wish.
Split help into multiple topics.
]]>
</description>

</plugin>


<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   match="^{invmon}(?<action>\d+)\,(?<id>\d+)\,.+\,.+$"
   regexp="y"
   send_to="12"
   sequence="100"
   script="adbOnInvmonTrigger"
   name="adbInvmonTrigger"
   omit_from_output="y"
  >
  </trigger>

  <trigger
   enabled="n"
   match="^{invitem}(?<id>\d+),(.*?),(?<item>.*),(.*?),(.*?),(.*?),(.*?),(.*?)$"
   regexp="y"
   send_to="12"
   sequence="100"
   name="adbInvitemTrigger"
   group="adbLootTriggerGroup"
   omit_from_output="y"
   script="adbOnInvitemTrigger"
  >
  </trigger>

  <!-- Unfortunately mush client only gives style runs for the last line of multiline trigger. -->
  <!-- We want to properly capture colored item name to search it in the cash, so have to make 2 similar triggers. -->
  <!-- Making sure that multiline crumble trigger fires after the item looted trigger. -->
  <trigger
   enabled="n"
   match="^You get (?:(?<gold>[0-9,]+) gold coins?|(?:(?<count>\d+) \* )?(?<item>.*)) from the(?: \w+,?)?(?: \w+,?)? (?:corpse|torso) of (?<mob>.*)\.$"
   regexp="y"
   send_to="12"
   sequence="10"
   keep_evaluating="y"
   group="adbLootTriggerGroup"
   script="adbOnItemLootedTrigger"
  >
  </trigger>

  <trigger
   enabled="n"
   match="^You get (?<item>.*) from the(?: \w+,?)?(?: \w+)? (?:corpse|torso) of (?<mob>.*)\.\n(?i)\1(?-i) crumbles into (?<crumble>[0-9,]+) gold pieces?.\n\Z"
   regexp="y"
   send_to="12"
   sequence="100"
   keep_evaluating="y"
   lines_to_match="2"
   multi_line="y"
   group="adbLootTriggerGroup"
   script="adbOnItemLootedCrumblesTrigger"
  >
  </trigger>

  <trigger
   enabled="n"
   name="adbBlootNameTrigger"
   match="^(?!\| Name       \:)(?!{invitem}).*\((?<bloot>Polished|Enhanced|Burnished|Shiny|Vibrant|Sparkling|Gleaming|Shimmering|Dazzling|Brilliant|Radiant|Wondrous|Majestic|Exalted|Eternal|Legendary|Epic|Mythical|Fabled|Divine|Godly)\).*$"
   regexp="y"
   send_to="12"
   sequence="10000"
   keep_evaluating="y"
   omit_from_output="y"
   script="adbOnBlootNameTrigger"
  >
  </trigger>
</triggers>

<aliases>
  <alias
   script="adbOnIdentifyCommand"
   match="^aid (?<id>[^\s]+)(?<worn> worn)?(?: (?<channel>(?!format\.).+?))?(?: (?<format>format\..+))?$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   script="adbOnAIDECommand"
   match="^aide(?: (?<id>\d+))?(?: (?<enchanted>enchanted))?(?: (?<removable>removable))?(?: S(?<solidify>\d+))?(?: I(?<illuminate>\d+))?(?: R(?<resonate>\d+))?(?: IR(?<IR>\d+))?(?: (?<format>format\..+))?(?: command\.(?<command>.+))?$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   script="adbOnAdbDebugDump"
   match="^adb_debug_dump$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   script="adbOnAdbDebugCacheClear"
   match="^adb_debug_cache_clear$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   script="adbOnDebugLevel"
   match="^adb_debug_level (?<level>\d+)$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   script="adbDrainStacks"
   match="^adb_debug_drain$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   script="adbOnHelp"
   match="^adb help(?: (?<topic>.*))?$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   script="adbOnOptionsCommand"
   match="^adb options(?: set (?<key1>[^\s]+) (?<key2>[^\s]+)(?: (?<value>.*))?)?$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   script="adbOnOptionsResetCommand"
   match="^adb options reset$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   script="adbOnOptionsEditCommand"
   match="^adb options edit$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
  <alias
   match="^adb off$"
   regexp="y"
   enabled="y"
   send_to="10"
   sequence="100"
  >
  <send>adb options set cockpit enable_auto_actions false</send>
  </alias>
  <alias
   match="^adb on$"
   regexp="y"
   enabled="y"
   send_to="10"
   sequence="100"
  >
  <send>adb options set cockpit enable_auto_actions true</send>
  </alias>

  <alias
   script="adbOnFormatAdd"
   match="^adb format add (?<newname>format\..+)(?: (?<format>format\..+))?$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>

  <alias
   script="adbOnFormatRemove"
   match="^adb format remove(?: (?<format>format\..+))?$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>

  <alias
   script="adbOnFormatEdit"
   match="^adb format edit(?: (?<format>format\..+))?$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>

  <alias
   script="adbOnAdbInfo"
   match="^adb info$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>

  <alias
   script="adbOnAdbFind"
   match="^adb find (?<query>.+?)(?: (?<format>format\..+))?$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>

  <alias
   script="adbOnAdbShop"
   match="^adb shop(?: (?<all>all))?$"
   regexp="y"
   enabled="y"
   send_to="12"
   sequence="100"
  >
  </alias>
</aliases>

<!--  Script  -->

<script>
<![CDATA[
dofile(GetPluginInfo(GetPluginID(), 20).."adb.lua")
]]>
</script>

</muclient>
